import {redeemP2SHContract} from '../src/contract/redeem-P2SH-contract'
import {extractAtomicSwapContract} from '../src/contract/extract-atomic-swap-contract';

const assert = require('assert');

const strSig = "3045022100f43430384ca5ecfc9ca31dd074d223836cef4801b3644c651c3a30d80fbf63b8022017dae9e7ec6f3f5ee0e0b60d146963ba85d9b31003d7f60852126f2a35492759"
const strPubKey = "03b10e3690bcaf0eae7098ec794666963803bcec5acfbe6a112bc8cdc93797f002"
const strSecret = "3e0b064c97247732a3b345ce7b2a835d928623cb2871c26db4c2539a38e61a16"
const strContract = "63a61429c36b8dd380e0426bdc1d834e74a630bfd5d1118876a914ebcf822c4a2cdb5f6a6b9c4a59b74d66461da5816704d728bd59b17576a91406fb26221375b1cbe2c17c14f1bc2510b9f8f8ff6888ac"
const strContractTx = "010000000267864c7145e43c84d13b514518cfdc7ca5cf2b04764ed2672caa9c8f6338a3e3010000006b483045022100901602e523f25e9659951d186eec7e8b9df9d194e8013fb6d7a05e4eafdbb61602207b66e0179a42c54d4fcfca2b1ccd89d56253cc83724593187713f6befb37866201210288ef714849ce7735b64ed886d056b80d0a384ca299090f684820d31e7682825afeffffff3ac58ce49bcef3d047ea80281659a78cd7ef8537ca2bfce336abdce41450d2d7000000006b483045022100bd1246fc18d26a9cc85c14fb60655da2f2e845af906504b8ba3acbb1b0ebf08202201ec2cd5a0c94e9e6b971ec3198be0ff57e91115342cd98ccece98d8b18294d86012103406e35c37b3b85481db7b7f7807315720dd6486c25e4f3af93d5d5f21e743881feffffff0248957e01000000001976a914c1925e7398d325820bba18726c387e9d80047ef588ac00e1f5050000000017a9142d913627b881255c417787cc255ccad9a33ce48d8700000000"

describe('#redeemP2SHContract()', function () {
  it('should create reedem contract/script aka unlock script', async () => {
    const contract = redeemP2SHContract(strContract, strSig, strPubKey, strSecret)
    // assert.equal(contract.toHex(), "483045022100f43430384ca5ecfc9ca31dd074d223836cef4801b3644c651c3a30d80fbf63b8022017dae9e7ec6f3f5ee0e0b60d146963ba85d9b31003d7f60852126f2a35492759012103b10e3690bcaf0eae7098ec794666963803bcec5acfbe6a112bc8cdc93797f002203e0b064c97247732a3b345ce7b2a835d928623cb2871c26db4c2539a38e61a16514c5163a61429c36b8dd380e0426bdc1d834e74a630bfd5d1118876a914ebcf822c4a2cdb5f6a6b9c4a59b74d66461da5816704d728bd59b17576a91406fb26221375b1cbe2c17c14f1bc2510b9f8f8ff6888ac")
    // const values = extractAtomicSwapContract(contract.toHex());
    // console.log(values);
  });
});

// reedemTxHash
// c49e6fd0057b601dbb8856ad7b3fcb45df626696772f6901482b08df0333e5a0
// reedemTx
// 000000000188fee037e8275f7d1e8686886a12131933f481b48902859791d6f1df01496f3401000000e0483045022100f43430384ca5ecfc9ca31dd074d223836cef4801b3644c651c3a30d80fbf63b8022017dae9e7ec6f3f5ee0e0b60d146963ba85d9b31003d7f60852126f2a35492759012103b10e3690bcaf0eae7098ec794666963803bcec5acfbe6a112bc8cdc93797f002203e0b064c97247732a3b345ce7b2a835d928623cb2871c26db4c2539a38e61a16514c5163a61429c36b8dd380e0426bdc1d834e74a630bfd5d1118876a914ebcf822c4a2cdb5f6a6b9c4a59b74d66461da5816704d728bd59b17576a91406fb26221375b1cbe2c17c14f1bc2510b9f8f8ff6888acffffffff01c6dff505000000001976a914e1fce397007bad3ce051f0b1c3c7587f016cd76a88acd728bd59
// reedemTx contract
// 483045022100f43430384ca5ecfc9ca31dd074d223836cef4801b3644c651c3a30d80fbf63b8022017dae9e7ec6f3f5ee0e0b60d146963ba85d9b31003d7f60852126f2a35492759012103b10e3690bcaf0eae7098ec794666963803bcec5acfbe6a112bc8cdc93797f002203e0b064c97247732a3b345ce7b2a835d928623cb2871c26db4c2539a38e61a16514c5163a61429c36b8dd380e0426bdc1d834e74a630bfd5d1118876a914ebcf822c4a2cdb5f6a6b9c4a59b74d66461da5816704d728bd59b17576a91406fb26221375b1cbe2c17c14f1bc2510b9f8f8ff6888ac


// console.log("** string   ", contract);
// console.log("** hex  ",  new Buffer(contract, 'hex'));
// console.log("** hexStr  ", new Buffer(contract).toString('hex'));
// console.log("** from  ", Buffer.from(contract, "hex"));
// console.log('-------------------------------------------------------');
// ** string    63a61429c36b8dd380e0426bdc1d834e74a630bfd5d1118876a914ebcf822c4a2cdb5f6a6b9c4a59b74d66461da5816704d728bd59b17576a91406fb26221375b1cbe2c17c14f1bc2510b9f8f8ff6888ac
// ** hex   <Buffer 63 a6 14 29 c3 6b 8d d3 80 e0 42 6b dc 1d 83 4e 74 a6 30 bf d5 d1 11 88 76 a9 14 eb cf 82 2c 4a 2c db 5f 6a 6b 9c 4a 59 b7 4d 66 46 1d a5 81 67 04 d7 ... >
// ** hexStr   363361363134323963333662386464333830653034323662646331643833346537346136333062666435643131313838373661393134656263663832326334613263646235663661366239633461353962373464363634363164613538313637303464373238626435396231373537366139313430366662323632323133373562316362653263313763313466316263323531306239663866386666363838386163
// ** from   <Buffer 63 a6 14 29 c3 6b 8d d3 80 e0 42 6b dc 1d 83 4e 74 a6 30 bf d5 d1 11 88 76 a9 14 eb cf 82 2c 4a 2c db 5f 6a 6b 9c 4a 59 b7 4d 66 46 1d a5 81 67 04 d7 ... >
