<div fxLayout="row" fxLayoutAlign="center stretch">
    <div fxFlex.xl="25%" fxFlex.lg="50%" fxFlex.md="70%" fxFlex.sm="80%" fxFlex.xs="100%">
        <div class="message-box">
            <info-message [message]="infoMsg" [type]="messageTypes.Info"></info-message>
        </div>
    </div>
</div>

<div class="gradient">
    <div fxLayout="row" fxLayoutAlign="center stretch">
        <div fxFlex.xl="25%" fxFlex.lg="50%" fxFlex.md="70%" fxFlex.sm="80%" fxFlex.xs="100%">
            <mat-form-field class="search-box">
                <input placeholder="Search" matInput [ngModel]="search" (ngModelChange)="filterCoin($event)">
                <button class="input-button" mat-button matSuffix mat-icon-button (click)="showAllCoins()">
                    <mat-icon>view_module</mat-icon>
                </button>
            </mat-form-field>
        </div>
    </div> 
              
    <perfect-scrollbar #perfectScrollbar class="wallet-slide" fxLayout="row" fxLayoutAlign="start center" (wheel)="wheelOverHorizontallDiv($event)">    
        <a *ngFor="let coin of filteredCoins" (click)="selectCoinCard(coin)" [id]="coin.name" [@scaleInOut]="scaleInOut">
            <div class="wallet-card" [class.active]="selectedCoin == coin"
                    *ngIf="(inMyPossesion && (coin.$balance | async)?.balance > 0) ||
                    (!inMyPossesion && (coin.$balance | async)?.balance >= 0)">
                <img class="coin-icon" [src]="coin.icon"  alt="">
                <div *ngIf="(coin.$balance | async)?.loading">
                    <div class="spinner">
                        <div class="circle-loader">
                        </div>
                    </div>
                </div>
                <div *ngIf="!(coin.$balance | async)?.loading">
                    <div class="coin-name">{{coin.fullName}}</div>
                    <div class="coin-balance">{{ (((coin.$balance | async)?.balance) || 0) | number : '1.2-8' }} {{coin.name}}</div>
                    <div class="coin-usd">{{ (coin.$amountUSD | async) || 0 }} USD</div>
                    <a class="faucet-button" mat-button href="#">Faucet</a>
                </div>
            </div>
        </a>
        <a *ngIf="filteredCoins.length === 0" class="no-coins">Not found</a>
    </perfect-scrollbar>
    <div fxLayout="row" fxLayoutAlign="center center" class="hide-coins-box">
        <mat-checkbox [ngModel]="inMyPossesion" (ngModelChange)="onPossesionModeChange($event)">Hide coins with zero balance</mat-checkbox>
    </div> 
</div>


<div class="gradient">
    <perfect-scrollbar class="options-slide" fxLayout="row" fxLayoutAlign="start center">
        <button
            class="wallet-option"
            (click)="selectWalletOption(walletOptions.Send)"
            [class.active]="selectedOption == walletOptions.Send"
            [@scaleInOut]="scaleInOut">SEND
        </button>
        <button
            class="wallet-option"
            (click)="selectWalletOption(walletOptions.Receive)"
            [class.active]="selectedOption == walletOptions.Receive"
            [@scaleInOut]="scaleInOut">RECEIVE
        </button>
        <button
            class="wallet-option"
            (click)="selectWalletOption(walletOptions.Transactions)"
            [class.active]="selectedOption == walletOptions.Transactions"
            [@scaleInOut]="scaleInOut">TRANSACTIONS
        </button>
    </perfect-scrollbar>
</div>
<div class="wallet-container">
    <div *ngIf="selectedOption == walletOptions.Send" class="wallet-content gradient" [@fadeInOut]="fadeInOut">
        <div fxLayout="row" fxLayoutAlign="center stretch">
            <div fxFlex.xl="25%" fxFlex.lg="40%" fxFlex.md="50%" fxFlex.sm="80%" fxFlex.xs="100%">
                <div class="input-label">Address</div>
                    <div class="input-box">
                        <input/>
                </div>
                <coin-input [label]="'Amount'" [alignLabel]="'left'" [coin]="selectedCoin"
                    [(ngModel)]="selectedCoin.amount">
                </coin-input>
                <coin-input [label]="'Network fee'" [alignLabel]="'left'" [coin]="selectedCoin"
                    [(ngModel)]="randomValue" disabled>
                </coin-input>
                <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="end end" fxLayoutAlign.xs="center stretch">
                    <div fxFlex="25" fxFlex.xs="1" class="start-button">
                        <app-shapeshift-button>Send</app-shapeshift-button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="selectedOption == walletOptions.Receive" class="wallet-content gradient" [@fadeInOut]="fadeInOut">
        <div fxLayout="row" fxLayoutAlign="center stretch">
            <div fxFlex.xl="25%" fxFlex.lg="40%" fxFlex.md="50%" fxFlex.sm="80%" fxFlex.xs="100%">
                <div class="input-label">Address</div>
                <div class="input-box">
                    <input class="copy-address" readonly value="{{ (selectedCoin.$balance | async)?.address || ($ethBalance | async)?.address }}" id="coinAddress"/>
                    <p class="copy-icon">
                        <a (click)="copyReceiveAddress($event)">
                            <i class="material-icons">content_copy</i>
                        </a>
                    </p>
                </div>
                <div class="qr-code-image">
                  <div id="qrcode"></div>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="selectedOption == walletOptions.Transactions" class="wallet-content gradient" [@fadeInOut]="fadeInOut">
        <div fxLayout="row" fxLayoutAlign="center center">
            <div fxFlex.xl="25%" fxFlex.lg="40%" fxFlex.md="50%" fxFlex.sm="80%" fxFlex.xs="100%">
                <a *ngIf="selectedCoin.name == 'BTC'" href="https://live.blockcypher.com/btc-testnet/address/{{(selectedCoin.$balance | async)?.address}}/">Blockcypher</a>
                <a *ngIf="selectedCoin.name != 'BTC'" href="https://rinkeby.etherscan.io/address/0x{{(selectedCoin.$balance | async)?.address}}">Rinkeby</a>
            </div>
        </div>
    </div>
</div>

